<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - PetLuz</title>
    <link rel="stylesheet" th:href="@{/css/base_customer.css}">
    <link rel="stylesheet" th:href="@{/css/customer_dashboard.css}">
</head>
<body>
    <!-- Header con navegaciÃ³n y carrito -->
    <div th:replace="shared/header :: header"></div>

    <!-- Sidebar del carrito -->
    <div th:replace="shared/cart-sidebar :: cart-sidebar"></div>

    <main class="dashboard-container">
        <div class="container">
            <!-- Banner de bienvenida -->
            <section class="welcome-banner">
                <div class="welcome-content">
                    <h1>Bienvenido, <span id="userName" th:text="${user?.firstName}">Usuario</span>! ğŸ¾</h1>
                    <p>Gestiona tus pedidos, direcciones y preferencias desde aquÃ­.</p>
                </div>
                <div class="profile-completion" th:if="${profileCompletion}">
                    <div class="completion-bar">
                        <div class="completion-fill" th:style="'width: ' + ${profileCompletion} + '%;'"></div>
                    </div>
                    <p>Perfil completado al <span th:text="${profileCompletion}">0</span>%</p>
                </div>
            </section>

            <!-- EstadÃ­sticas rÃ¡pidas -->
            <section class="quick-stats">
                <div class="stats-grid">
                    <!-- Pedidos Pendientes -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“¦</div>
                        <div class="stat-info">
                            <h3 id="pendingOrders">0</h3>
                            <p>Pedidos Pendientes</p>
                        </div>
                    </div>

                    <!-- Total Pedidos -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ›’</div>
                        <div class="stat-info">
                            <h3 id="totalOrders">0</h3>
                            <p>Total de Pedidos</p>
                        </div>
                    </div>

                    <!-- Productos en Carrito -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ›ï¸</div>
                        <div class="stat-info">
                            <h3 id="cartItemsCount">0</h3>
                            <p>Productos en Carrito</p>
                        </div>
                    </div>

                    <!-- Direcciones Guardadas -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-info">
                            <h3 id="savedAddresses">0</h3>
                            <p>Direcciones Guardadas</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Acciones rÃ¡pidas -->
            <section class="quick-actions">
                <h2>Acciones RÃ¡pidas</h2>
                <div class="actions-grid">
                    <a href="/user/cart" class="action-card">
                        <div class="action-icon">ğŸ›’</div>
                        <h3>Ver Carrito</h3>
                        <p>Revisa y gestiona tus productos</p>
                    </a>

                    <a href="/user/orders" class="action-card">
                        <div class="action-icon">ğŸ“‹</div>
                        <h3>Mis Pedidos</h3>
                        <p>Revisa el estado de tus pedidos</p>
                    </a>

                    <a href="/user/profile" class="action-card">
                        <div class="action-icon">ğŸ‘¤</div>
                        <h3>Mi Perfil</h3>
                        <p>Actualiza tu informaciÃ³n personal</p>
                    </a>

                    <a href="/user/addresses" class="action-card">
                        <div class="action-icon">ğŸ“</div>
                        <h3>Mis Direcciones</h3>
                        <p>Gestiona tus direcciones de envÃ­o</p>
                    </a>

                    <a href="/customer/products" class="action-card">
                        <div class="action-icon">ğŸ•</div>
                        <h3>Seguir Comprando</h3>
                        <p>Descubre nuevos productos</p>
                    </a>

                    <a href="#" class="action-card" id="quickCheckout">
                        <div class="action-icon">ğŸš€</div>
                        <h3>Pago RÃ¡pido</h3>
                        <p>Finaliza tu compra actual</p>
                    </a>
                </div>
            </section>

            <!-- Pedidos Recientes -->
            <section class="recent-orders">
                <div class="section-header">
                    <h2>Pedidos Recientes</h2>
                    <a href="/user/orders" class="view-all">Ver todos</a>
                </div>
                <div class="orders-list" id="recentOrders">
                    <!-- Los pedidos se cargarÃ¡n dinÃ¡micamente -->
                    <div class="loading">Cargando pedidos recientes...</div>
                </div>
            </section>

            <!-- Productos Recomendados -->
            <section class="recommended-products">
                <div class="section-header">
                    <h2>Productos Recomendados</h2>
                    <a href="/customer/products" class="view-all">Ver todos</a>
                </div>
                <div class="products-grid" id="recommendedProducts">
                    <!-- Los productos se cargarÃ¡n dinÃ¡micamente -->
                    <div class="loading">Cargando productos recomendados...</div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <div th:replace="shared/footer :: footer-pedLUz"></div>
    
    <script th:src="@{/js/customer_dashboard.js}"></script>
</body>
</html>