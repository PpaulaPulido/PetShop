<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito - PetLuz</title>
    <link rel="stylesheet" th:href="@{/css/base_customer.css}">
    <link rel="stylesheet" th:href="@{/css/customer_cart.css}">
</head>
<body>
    <!-- Header -->
    <div th:replace="shared/header :: header"></div>

    <!-- Sidebar del carrito (para quick actions) -->
    <div th:replace="shared/cart-sidebar :: cart-sidebar"></div>

    <main class="cart-container">
        <div class="container">
            <!-- Header del carrito -->
            <section class="cart-header">
                <div class="header-content">
                    <h1>üõí Mi Carrito de Compras</h1>
                    <p>Revisa y gestiona los productos en tu carrito</p>
                </div>
                <div class="cart-stats">
                    <span id="cartPageItemsCount">0 productos</span>
                    <span id="cartPageTotalAmount">Total: $0.00</span>
                </div>
            </section>

            <div class="cart-layout">
                <!-- Columna principal - Lista de productos -->
                <div class="cart-main">
                    <!-- Estado del carrito -->
                    <div class="cart-page-state" id="cartPageState">
                        <div class="loading-cart">
                            <p>Cargando tu carrito...</p>
                        </div>
                    </div>

                    <!-- Lista de productos (se carga din√°micamente) -->
                    <div class="cart-page-items" id="cartPageItems" style="display: none;">
                        <!-- Los items se cargar√°n aqu√≠ -->
                    </div>

                    <!-- Carrito vac√≠o -->
                    <div class="empty-cart" id="cartPageEmpty" style="display: none;">
                        <div class="empty-state">
                            <div class="empty-icon">üõí</div>
                            <h2>Tu carrito est√° vac√≠o</h2>
                            <p>¬°Descubre nuestros productos para mascotas y llena tu carrito de amor!</p>
                            <a href="/customer/products" class="btn btn-primary">
                                Comenzar a Comprar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Sidebar - Resumen y acciones -->
                <aside class="cart-sidebar-content">
                    <div class="cart-summary">
                        <h3>Resumen del Pedido</h3>
                        
                        <div class="summary-details">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="summarySubtotal">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Env√≠o estimado:</span>
                                <span id="summaryShipping">$5.99</span>
                            </div>
                            <div class="summary-row">
                                <span>Impuestos (19%):</span>
                                <span id="summaryTax">$0.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total estimado:</span>
                                <span id="summaryTotal">$0.00</span>
                            </div>
                        </div>

                        <div class="summary-actions">
                            <a href="/user/checkout" class="btn btn-primary btn-block" id="checkoutBtn" style="display: none;">
                                Proceder al Checkout
                            </a>
                            <a href="/customer/products" class="btn btn-outline btn-block">
                                Continuar Comprando
                            </a>
                        </div>

                        <!-- Beneficios -->
                        <div class="cart-benefits">
                            <h4>‚úÖ Beneficios de tu compra:</h4>
                            <ul>
                                <li>üöö Env√≠o gratis en compras sobre $100.000</li>
                                <li>üîí Pago 100% seguro</li>
                                <li>üì¶ Entrega en todo Colombia</li>
                                <li>üêæ Productos de calidad para tus mascotas</li>
                            </ul>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Modal para confirmar eliminaci√≥n -->
    <div class="modal-overlay" id="deleteModalOverlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>¬øEliminar producto?</h3>
                <button type="button" class="modal-close" id="closeDeleteModal">‚úï</button>
            </div>
            <div class="modal-body">
                <p>¬øEst√°s seguro de que quieres eliminar <strong id="deleteProductName"></strong> de tu carrito?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDelete">
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" id="confirmDelete">
                    S√≠, Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para ver detalles del producto -->
    <div class="modal-overlay product-modal" id="productModalOverlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Detalles del Producto</h3>
                <button type="button" class="modal-close" id="closeProductModal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="product-modal-content">
                    <div class="product-modal-image">
                        <img id="productModalImage" src="" alt="Producto" onerror="this.src='/images/default-product.png'">
                    </div>
                    <div class="product-modal-info">
                        <h2 id="productModalName" class="product-modal-name"></h2>
                        <div id="productModalPrice" class="product-modal-price"></div>
                        <p id="productModalDescription" class="product-modal-description"></p>
                        <div id="productModalStock" class="product-modal-stock"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="customerCart.hideProductModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="shared/footer :: footer-pedLUz"></div>

    <!-- Notificaciones -->
    <div id="notificationContainer"></div>

    <script th:src="@{/js/customer_cart.js}"></script>

</body>
</html>