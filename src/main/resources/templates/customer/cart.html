<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito - PetLuz</title>
    <link rel="stylesheet" th:href="@{/css/base_customer.css}">
    <link rel="stylesheet" th:href="@{/css/customer_cart.css}">
</head>

<body>
    <div th:replace="shared/header :: header"></div>
    <div th:replace="shared/cart-sidebar :: cart-sidebar"></div>

    <main class="cart-page-container">
        <div class="container">
            <section class="cart-page-header">
                <div class="cart-page-header-content">
                    <h1>Mi Carrito de Compras</h1>
                    <p>Revisa y gestiona los productos en tu carrito</p>
                </div>
                <div class="cart-page-stats">
                    <span id="cartPageItemsCount">0 productos</span>
                    <span id="cartPageTotalAmount">Total: $0.00</span>
                </div>
            </section>

            <div class="cart-page-layout">
                <!-- Columna principal - Lista de productos -->
                <div class="cart-page-main">
                    <!-- Estado del carrito -->
                    <div class="cart-page-state" id="cartPageState">
                        <div class="cart-page-loading">
                            <p>Cargando tu carrito...</p>
                        </div>
                    </div>

                    <div class="cart-page-items-list" id="cartPageItems" style="display: none;">
                    </div>

                    <!-- Carrito vac√≠o -->
                    <div class="cart-page-empty" id="cartPageEmpty" style="display: none;">
                        <div class="cart-page-empty-state">
                            <div class="cart-page-empty-icon">üõí</div>
                            <h2>Tu carrito est√° vac√≠o</h2>
                            <p>¬°Descubre nuestros productos para mascotas y llena tu carrito de amor!</p>
                            <a href="/customer/products" class="cart-page-btn cart-page-btn-primary">
                                Comenzar a Comprar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Sidebar - Resumen y acciones -->
                <aside class="cart-page-sidebar">
                    <div class="cart-page-summary">
                        <h3>Resumen del Pedido</h3>

                        <div class="cart-page-summary-details">
                            <div class="cart-page-summary-row cart-page-summary-row-total">
                                <span>Total del Carrito:</span>
                                <span id="summaryTotal">$0.00</span>
                            </div>
                        </div>

                        <div class="cart-page-summary-actions">
                            <a href="/user/checkout" class="cart-page-btn cart-page-btn-primary cart-page-btn-block"
                                id="checkoutBtn" style="display: none;">
                                Proceder al Checkout
                            </a>
                            <a href="/customer/products"
                                class="cart-page-btn cart-page-btn-outline cart-page-btn-block">
                                Continuar Comprando
                            </a>
                        </div>

                        <!-- Beneficios -->
                        <div class="cart-page-benefits">
                            <h4>‚úÖ Beneficios de tu compra:</h4>
                            <ul>
                                <li>üîí Pago 100% seguro</li>
                                <li>üì¶ Entrega en todo Colombia</li>
                                <li>üêæ Productos de calidad para tus mascotas</li>
                            </ul>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Modal para confirmar eliminaci√≥n -->
    <div class="cart-modal-overlay" id="deleteModalOverlay" style="display: none;">
        <div class="cart-modal">
            <div class="cart-modal-header">
                <h3>¬øEliminar producto?</h3>
                <button type="button" class="cart-modal-close" id="closeDeleteModal">‚úï</button>
            </div>
            <div class="cart-modal-body">
                <p>¬øEst√°s seguro de que quieres eliminar <strong id="deleteProductName"></strong> de tu carrito?</p>
            </div>
            <div class="cart-modal-footer">
                <button type="button" class="cart-page-btn cart-page-btn-secondary" id="cancelDelete">
                    Cancelar
                </button>
                <button type="button" class="cart-page-btn cart-page-btn-danger" id="confirmDelete">
                    S√≠, Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para ver detalles del producto -->
    <div class="cart-modal-overlay cart-product-modal" id="productModalOverlay" style="display: none;">
        <div class="cart-modal">
            <div class="cart-modal-header">
                <h3>Detalles del Producto</h3>
                <button type="button" class="cart-modal-close" id="closeProductModal">‚úï</button>
            </div>
            <div class="cart-modal-body">
                <div class="cart-product-modal-content">
                    <div class="cart-product-modal-image">
                        <img id="productModalImage" src="" alt="Producto"
                            onerror="this.src='/images/default-product.png'">
                    </div>
                    <div class="cart-product-modal-info">
                        <h2 id="productModalName" class="cart-product-modal-name"></h2>
                        <div id="productModalPrice" class="cart-product-modal-price"></div>
                        <p id="productModalDescription" class="cart-product-modal-description"></p>
                        <div id="productModalStock" class="cart-product-modal-stock"></div>
                    </div>
                </div>
            </div>
            <div class="cart-modal-footer">
                <button type="button" class="cart-page-btn cart-page-btn-primary"
                    onclick="customerCart.hideProductModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
    <div th:replace="shared/footer :: footer-pedLUz"></div>

    <div id="notificationContainer"></div>
    <script th:src="@{/js/customer_header.js}"></script>
    <script th:src="@{/js/customer_cart.js}"></script>
    <script th:src="@{/js/customer_effects.js}"></script>
</body>

</html>