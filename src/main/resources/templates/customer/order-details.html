<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Detalles del Pedido - PetLuz</title>
    <link rel="stylesheet" th:href="@{/css/base_customer.css}">
    <link rel="stylesheet" th:href="@{/css/customer_order_details.css}">
</head>
<body>
    <!-- Header -->
    <div th:replace="shared/header :: header"></div>

    <!-- Sidebar del carrito -->
    <div th:replace="shared/cart-sidebar :: cart-sidebar"></div>

    <main class="order-details-container">
        <div class="container">
            <!-- Navegaci√≥n -->
            <nav class="breadcrumb">
                <a href="/user/dashboard">Mi Cuenta</a>
                <span class="separator">/</span>
                <a href="/user/orders">Mis Pedidos</a>
                <span class="separator">/</span>
                <span class="current">Detalles del Pedido</span>
            </nav>

            <!-- Header del pedido -->
            <section class="order-header-section">
                <div class="order-header">
                    <div class="order-title">
                        <h1>üì¶ Detalles del Pedido</h1>
                        <p class="order-subtitle" id="orderSubtitle">Cargando informaci√≥n del pedido...</p>
                    </div>
                    <div class="order-actions">
                        <button class="btn btn-outline" id="printOrderBtn">
                            üñ®Ô∏è Imprimir
                        </button>
                        <button class="btn btn-primary" onclick="window.location.href='/user/orders'">
                            ‚Üê Volver a Pedidos
                        </button>
                    </div>
                </div>

                <!-- Resumen r√°pido -->
                <div class="order-summary-cards">
                    <div class="summary-card">
                        <div class="summary-icon">üìã</div>
                        <div class="summary-content">
                            <span class="summary-label">N√∫mero de Pedido</span>
                            <span class="summary-value" id="orderNumber">-</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üìÖ</div>
                        <div class="summary-content">
                            <span class="summary-label">Fecha</span>
                            <span class="summary-value" id="orderDate">-</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üí∞</div>
                        <div class="summary-content">
                            <span class="summary-label">Total</span>
                            <span class="summary-value" id="orderTotal">-</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üìä</div>
                        <div class="summary-content">
                            <span class="summary-label">Estado</span>
                            <span class="summary-value status-badge" id="orderStatus">-</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contenido principal -->
            <div class="order-content">
                <!-- Columna izquierda - Informaci√≥n principal -->
                <div class="order-main-content">
                    <!-- Estado del pedido -->
                    <section class="order-section">
                        <div class="section-header">
                            <h2>üöö Estado del Pedido</h2>
                        </div>
                        <div class="order-timeline" id="orderTimeline">
                            <!-- La l√≠nea de tiempo se cargar√° din√°micamente -->
                        </div>
                    </section>

                    <!-- Productos del pedido -->
                    <section class="order-section">
                        <div class="section-header">
                            <h2>üõçÔ∏è Productos del Pedido</h2>
                            <span class="items-count" id="itemsCount">0 productos</span>
                        </div>
                        <div class="order-products" id="orderProducts">
                            <!-- Los productos se cargar√°n din√°micamente -->
                        </div>
                    </section>

                    <!-- Informaci√≥n de env√≠o -->
                    <section class="order-section">
                        <div class="section-header">
                            <h2>üìç Informaci√≥n de Env√≠o</h2>
                        </div>
                        <div class="shipping-info" id="shippingInfo">
                            <!-- La informaci√≥n de env√≠o se cargar√° din√°micamente -->
                        </div>
                    </section>
                </div>

                <!-- Columna derecha - Informaci√≥n secundaria -->
                <div class="order-sidebar">
                    <!-- Resumen del pedido -->
                    <section class="sidebar-section">
                        <h3>üìä Resumen del Pedido</h3>
                        <div class="order-summary" id="orderSummary">
                            <!-- El resumen se cargar√° din√°micamente -->
                        </div>
                    </section>

                    <!-- Informaci√≥n de pago -->
                    <section class="sidebar-section">
                        <h3>üí≥ Informaci√≥n de Pago</h3>
                        <div class="payment-info" id="paymentInfo">
                            <!-- La informaci√≥n de pago se cargar√° din√°micamente -->
                        </div>
                    </section>

                    <!-- Acciones del pedido -->
                    <section class="sidebar-section">
                        <h3>‚ö° Acciones</h3>
                        <div class="order-actions-sidebar" id="orderActions">
                            <!-- Las acciones se cargar√°n din√°micamente -->
                        </div>
                    </section>

                    <!-- Soporte -->
                    <section class="sidebar-section support-section">
                        <h3>üìû ¬øNecesitas ayuda?</h3>
                        <div class="support-content">
                            <p>Si tienes alguna pregunta sobre tu pedido, nuestro equipo de soporte est√° aqu√≠ para ayudarte.</p>
                            <div class="support-actions">
                                <button class="btn btn-outline btn-sm btn-block" onclick="contactSupport()">
                                    üí¨ Contactar Soporte
                                </button>
                                <button class="btn btn-outline btn-sm btn-block" onclick="trackPackage()">
                                    üìç Rastrear Paquete
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Informaci√≥n adicional -->
            <section class="additional-info">
                <div class="info-cards">
                    <div class="info-card">
                        <div class="info-icon">üîÑ</div>
                        <div class="info-content">
                            <h4>Pol√≠tica de Devoluciones</h4>
                            <p>Tienes 30 d√≠as para devolver tu pedido si no est√°s satisfecho</p>
                            <a href="/returns" class="btn-link">Saber m√°s</a>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">üõ°Ô∏è</div>
                        <div class="info-content">
                            <h4>Garant√≠a del Producto</h4>
                            <p>Todos nuestros productos incluyen garant√≠a del fabricante</p>
                            <a href="/warranty" class="btn-link">Ver detalles</a>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">üìû</div>
                        <div class="info-content">
                            <h4>Soporte 24/7</h4>
                            <p>Estamos disponibles para ayudarte en cualquier momento</p>
                            <a href="/contact" class="btn-link">Contactar</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal de cancelaci√≥n -->
    <div class="modal-overlay" id="cancelModalOverlay" style="display: none;">
        <div class="modal" id="cancelModal">
            <div class="modal-header">
                <h3>Cancelar Pedido</h3>
                <button type="button" class="modal-close" id="closeCancelModal">‚úï</button>
            </div>
            <div class="modal-body">
                <p>¬øEst√°s seguro de que quieres cancelar el pedido <strong id="cancelOrderNumber"></strong>?</p>
                <div class="cancel-warning">
                    <p>‚ö†Ô∏è Esta acci√≥n no se puede deshacer. El stock de los productos ser√° liberado.</p>
                </div>
                <div class="cancel-reason">
                    <label for="cancelReason">Motivo de cancelaci√≥n (opcional):</label>
                    <textarea id="cancelReason" placeholder="¬øPor qu√© deseas cancelar este pedido?" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelCancelBtn">
                    Mantener Pedido
                </button>
                <button type="button" class="btn btn-danger" id="confirmCancelBtn">
                    S√≠, Cancelar Pedido
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="shared/footer :: footer-pedLUz"></div>

    <!-- Notificaciones -->
    <div id="notificationContainer"></div>

    <script th:src="@{/js/customer_order_details.js}"></script>
</body>
</html>